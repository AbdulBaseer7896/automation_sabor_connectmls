



{% extends "base.html" %}

{% block content %}
<div class="container-fluid mt-4">
    <div class="card shadow-lg border-0 rounded-4">
        <div class="card-header bg-gradient-primary text-white rounded-top-4 py-3">
            <div class="d-flex justify-content-between align-items-center">
                <h3 class="mb-0"><i class="fas fa-edit me-2"></i>Edit Property Data</h3>
                <div>
                    <button class="btn btn-light btn-sm me-2" onclick="window.history.back()">
                        <i class="fas fa-arrow-left me-1"></i> Back
                    </button>
                    <button id="saveBtn" class="btn btn-light btn-sm">
                        <i class="fas fa-save me-1"></i> Save Changes
                    </button>
                </div>
            </div>
        </div>
        <div class="card-body p-4">
            <div class="alert alert-info mb-4 rounded-3">
                <i class="fas fa-info-circle me-2"></i>Edit the property information below. The form is designed to resemble a contract for easy data entry.
            </div>
            
            <!-- Contract-style Form -->
            <div class="contract-form-container">
                <form id="propertyForm">
                    <input type="hidden" id="propertyId" value="{{ property._id }}">
                    
                    <!-- Contract Header -->
                    <div class="contract-header text-center mb-4">
                        <h2 class="text-primary">PROPERTY INFORMATION CONTRACT</h2>
                        <p class="text-muted">Edit and Update Property Details</p>
                        <hr class="contract-divider">
                    </div>
                    
                    <!-- Property Information Section -->
                    <div class="contract-section mb-4">
                        <h4 class="section-title">Property Information</h4>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-group contract-field">
                                    <label for="address" class="contract-label">Address</label>
                                    <input type="text" class="form-control contract-input" id="address" value="{{ property.address }}" required>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group contract-field">
                                    <label for="lot" class="contract-label">Lot</label>
                                    <input type="text" class="form-control contract-input" id="lot" value="{{ property.Lot }}">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group contract-field">
                                    <label for="block" class="contract-label">Block</label>
                                    <input type="text" class="form-control contract-input" id="block" value="{{ property.Block }}">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-group contract-field">
                                    <label for="subdivision" class="contract-label">Subdivision Legal Name</label>
                                    <input type="text" class="form-control contract-input" id="subdivision" value="{{ property.Subdivision_Legal_Name }}">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group contract-field">
                                    <label for="country" class="contract-label">Country</label>
                                    <input type="text" class="form-control contract-input" id="country" value="{{ property.contry }}">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-group contract-field">
                                    <label for="titleCompany" class="contract-label">Preferred Title Company</label>
                                    <input type="text" class="form-control contract-input" id="titleCompany" value="{{ property.Preferred_Title_Company }}">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group contract-field">
                                    <label for="email" class="contract-label">Listing Associate Email</label>
                                    <input type="email" class="form-control contract-input" id="email" value="{{ property.Listing_Associate_Email_Address }}">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Broker Information Section -->
                    <div class="contract-section mb-4">
                        <h4 class="section-title">Broker Information</h4>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-group contract-field">
                                    <label for="officeName" class="contract-label">Office Name</label>
                                    <input type="text" class="form-control contract-input" id="officeName" value="{{ property.broker_info.office_name if property.broker_info else '' }}">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group contract-field">
                                    <label for="officeType" class="contract-label">Office Type</label>
                                    <input type="text" class="form-control contract-input" id="officeType" value="{{ property.broker_info.office_type if property.broker_info else '' }}">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-group contract-field">
                                    <label for="officeId" class="contract-label">Office ID</label>
                                    <input type="text" class="form-control contract-input" id="officeId" value="{{ property.broker_info.office_id if property.broker_info else '' }}">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group contract-field">
                                    <label for="brokerEmail" class="contract-label">Broker Email</label>
                                    <input type="email" class="form-control contract-input" id="brokerEmail" value="{{ property.broker_info.email if property.broker_info else '' }}">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-group contract-field">
                                    <label for="website" class="contract-label">Website</label>
                                    <input type="url" class="form-control contract-input" id="website" value="{{ property.broker_info.website if property.broker_info else '' }}">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group contract-field">
                                    <label for="phone" class="contract-label">Phone</label>
                                    <input type="tel" class="form-control contract-input" id="phone" value="{{ property.broker_info.phone if property.broker_info else '' }}">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-group contract-field">
                                    <label for="streetAddress" class="contract-label">Street Address</label>
                                    <input type="text" class="form-control contract-input" id="streetAddress" value="{{ property.broker_info.street_address if property.broker_info else '' }}">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group contract-field">
                                    <label for="cityStateZip" class="contract-label">City, State, Zip</label>
                                    <input type="text" class="form-control contract-input" id="cityStateZip" value="{{ property.broker_info.city_state_zip if property.broker_info else '' }}">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Admin Data Section -->
                    <div class="contract-section mb-4">
                        <h4 class="section-title">Contract Financial & Deadline Information</h4>
                        
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <div class="form-group contract-field">
                                    <label for="salesPrice" class="contract-label">Sales Price ($)</label>
                                    <input type="number" class="form-control contract-input" id="salesPrice" value="{{ property.admin_data.sales_price if property.admin_data else '' }}">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group contract-field">
                                    <label for="earnestMoney" class="contract-label">Earnest Money ($)</label>
                                    <input type="number" class="form-control contract-input" id="earnestMoney" value="{{ property.admin_data.earnest_money if property.admin_data else '' }}">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group contract-field">
                                    <label for="optionFee" class="contract-label">Option Fee ($)</label>
                                    <input type="number" class="form-control contract-input" id="optionFee" value="{{ property.admin_data.option_fee if property.admin_data else '' }}">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-group contract-field">
                                    <label for="buyerApprovalDeadline" class="contract-label">Buyer Approval Deadline (Days)</label>
                                    <input type="number" class="form-control contract-input" id="buyerApprovalDeadline" value="{{ property.admin_data.buyer_approval_deadline_days if property.admin_data else '' }}">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group contract-field">
                                    <label for="surveyDeliveryDeadline" class="contract-label">Survey Delivery Deadline (Days)</label>
                                    <input type="number" class="form-control contract-input" id="surveyDeliveryDeadline" value="{{ property.admin_data.survey_delivery_deadline_days if property.admin_data else '' }}">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="contract-actions text-center mt-4">
                        <button id="saveBtnLarge" type="button" class="btn btn-primary btn-lg me-3">
                            <i class="fas fa-save me-2"></i> Save Changes
                        </button>
                        <button id="saveDownloadBtn" type="button" class="btn btn-success btn-lg">
                            <i class="fas fa-file-download me-2"></i> Save & Download PDF
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block styles %}
<style>
.contract-form-container {
    background-color: #f8f9fa;
    padding: 2rem;
    border-radius: 0.5rem;
    border: 1px solid #dee2e6;
}

.contract-header {
    padding-bottom: 1rem;
    border-bottom: 2px solid #0d6efd;
}

.contract-divider {
    border-top: 2px dashed #dee2e6;
    margin: 1.5rem 0;
}

.contract-section {
    background-color: white;
    padding: 1.5rem;
    border-radius: 0.5rem;
    border: 1px solid #dee2e6;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
}

.section-title {
    color: #0d6efd;
    border-bottom: 1px solid #dee2e6;
    padding-bottom: 0.5rem;
    margin-bottom: 1.5rem;
}

.contract-field {
    margin-bottom: 1rem;
}

.contract-label {
    font-weight: 600;
    color: #495057;
    margin-bottom: 0.5rem;
}

.contract-input {
    border: 1px solid #ced4da;
    border-radius: 0.375rem;
    padding: 0.75rem;
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.contract-input:focus {
    border-color: #86b7fe;
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
}

.contract-actions {
    padding-top: 2rem;
    border-top: 2px dashed #dee2e6;
}
</style>
{% endblock %}
